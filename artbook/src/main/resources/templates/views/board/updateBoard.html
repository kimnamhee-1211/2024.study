<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <script src="https://unpkg.com/gijgo@1.9.14/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://unpkg.com/gijgo@1.9.14/css/gijgo.min.css" rel="stylesheet" type="text/css" />

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.9.0/dist/summernote-bs4.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.9.0/dist/summernote-bs4.min.js"></script>
<style>

	#writeContainer{
		border : 1px solid lightgray;
		width:1000px;
	}
	
	hr{
		border : 1px solid lightgray;
	}
	.btn-secondary{
		width:200px;
	}
	
	.note-editor {
        border : 1px solid lightgray;
        padding:0 !important;
    }
    
</style>
</head>
<body style="background:#f8efed; margin:0;">
		
		<div th:replace="~{common/navbar :: navbar}"></div>
		
		<div class="container-lg p-4">
		
		<br><br>
			<div class="container-md m-6 p-6" id="writeContainer">
				<form action="updateBoard.bo" method="post" enctype="multipart/form-data" id="updateBoardForm">
					<input type="hidden" th:value="${b.boardNo}" name="boardNo">
					
					<div class="row m-3 mt-5 text-center"><h3>Exhibition</h3></div>
					
					<div class="row m-4 justify-content-md-center">
					  <div class="col-7">
					  	<label for="showTitle" class="form-label">Exhibition Title</label>
					    <input th:value="${b.showTitle}" type="text" name="showTitle" class="form-control" placeholder="exhibition title" id="showTitle">
					  </div>
					  <div class="col-4">
					  	<label for="artist" class="form-label">Artist</label>
					    <input th:value="${b.artist}" type="text" name="artist" class="form-control" placeholder="artist" id="artist">
					  </div>
					</div>
					
					<div class="row m-4 justify-content-md-center">
					  <div class="col-5 mb-3">
					  	<label for="startDate" class="form-label">Start Date</label>
					    <input th:value="${startDate}" id="startDate" type="text" name="start">
					  </div>
					  <div class="col-1 mt-4 text-center">
						<h4> ~ </h4>
					  </div>
					  <div class="col-5 mb-3">
					  	<label for="endDate" class="form-label">End Date</label>
					    <input th:value="${endDate}" id="endDate" type="text" name="end">
					  </div>										
					</div>
					
					<hr>
					
					<div class="row m-3 mt-5 text-center"><h3>Review</h3></div>
					
					<div class="row m-4 justify-content-md-center">
					  <div class="col-9">
					  	<label for="title" class="form-label">Title</label>
					    <input th:value="${b.title}" type="text" name="title" class="form-control" placeholder="title" id="title">
					  </div>
					  <div class="col-3">
					  	<label for="category" class="form-label">Category</label>
					    <select id="category" name="category" class="form-select">
					      <option value="회화" th:selected="${b.category eq '회화' }">회화</option>
					      <option value="조각/설치" th:selected="${b.category eq '조각/설치' }">조각/설치</option>
					      <option value="종합" th:selected="${b.category eq '종합' }">종합</option>
					      <option value="기타" th:selected="${b.category eq '기타' }">기타</option>
					    </select>
					  </div>
					</div>
										
					<div class="row m-4 mb-3">
					  <label for="intro" class="form-label">Intro</label>
					  <input th:value="${b.intro}" type="text" name="intro" class="form-control" id="intro" placeholder="intro">
					</div>
					
					<div class="row m-4 mb-5">
					  <label for="content" class="form-label">Content</label>
					  <textarea name="content" class="form-control" id="content" style="padding:0" rows="30">[[${b.content}]]</textarea>
					</div>					
					<hr>
					
					<div class="row m-4 mb-5">
					  <label class="form-label">Thumbnail</label>
					  <div class="row" th:if="${sattm != null}">
					  	<div class="row-2 m-1 mb-4">
					  		<img th:src="${sattm.newName}" width="420px;" height="280px" alt="No Image" style="margin-left:10px">
					  		<input type="hidden" name="delsImg" th:value="${sattm.newName}">
					  	</div>
					  	<div class="row">
					  		<p>Please upload a new image to change the thumbnail image.</p>
					  		<input name="sfile" class="form-control" type="file" id="formFileS">
					  	</div>	
					  </div>				  
					  <div  class="row-4" th:if="${sattm == null}">
					  	<input name="sfile" class="form-control" type="file" id="formFileS">
					  </div>
					</div>
					<hr>
					
					<div class="row m-4" id="photoRow">
				  		<label class="form-label">
				  			Photo &nbsp;
					  		<svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="currentColor" class="bi bi-plus-square" viewBox="0 0 16 16">
							  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>
							  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
							</svg>&nbsp;
							<svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="currentColor" class="bi bi-dash-square" viewBox="0 0 16 16">
							  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>
							  <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8"/>
							</svg>
				  		</label>
				  		<input name="files" class="form-control" type="file">
					</div>
					<div class="row m-4 mb-5 justify-content-left" th:if="${plist != null && plist.size() > 0}">
						<p>If you have an image you want to delete, please select that image.</p>
						<div class="col m-2" th:each="p : ${plist}">
							<div class="form-check form-check-inline justify-content-left">
							  <input class="form-check-input" type="checkbox" th:id="${p.attmNo}" th:value="${p.newName}" name="delImg">
							  <label class="form-check-label" th:for="${p.attmNo}">
							  	<img class="oldimg" th:src="${p.newName}" width="150px;" height="100px" alt="No Image">
							  </label>
							</div>
					  	</div>										
					</div>
									
					<hr>
	
					<div class="row m-4 justify-content-md-center">
						<button type="button" id="updateButton" class="btn btn-secondary">update</button>
					</div>
			
				</form>	
			</div>
			
			<div style="display:scroll;position:fixed;bottom:80px;right:80px;">
				<a href="#">
					<svg xmlns="http://www.w3.org/2000/svg" width="55" height="55" fill="pink" class="bi bi-balloon-heart-fill" viewBox="0 0 16 16">
					  <path fill-rule="evenodd" d="M8.49 10.92C19.412 3.382 11.28-2.387 8 .986 4.719-2.387-3.413 3.382 7.51 10.92l-.234.468a.25.25 0 1 0 .448.224l.04-.08c.009.17.024.315.051.45.068.344.208.622.448 1.102l.013.028c.212.422.182.85.05 1.246-.135.402-.366.751-.534 1.003a.25.25 0 0 0 .416.278l.004-.007c.166-.248.431-.646.588-1.115.16-.479.212-1.051-.076-1.629-.258-.515-.365-.732-.419-1.004a2 2 0 0 1-.037-.289l.008.017a.25.25 0 1 0 .448-.224l-.235-.468ZM6.726 1.269c-1.167-.61-2.8-.142-3.454 1.135-.237.463-.36 1.08-.202 1.85.055.27.467.197.527-.071.285-1.256 1.177-2.462 2.989-2.528.234-.008.348-.278.14-.386"/>
					</svg>			
				</a>
			</div>
								
		</div>
		
		<br><br><br><br><br><br>
		
		
	<script th:inline="javascript">
		
		var day = new Date('2000-01-01');
		$('#startDate').datepicker({
			format: "yyyy-mm-dd",
			uiLibrary: 'bootstrap4',
			iconsLibrary: 'fontawesome',
			minDate: day,
			maxDate: function () {
				return $('#endDate').val();
			}
		});
		$('#endDate').datepicker({
			format: "yyyy-mm-dd",
			uiLibrary: 'bootstrap4',
			iconsLibrary: 'fontawesome',
			minDate: function () {
				return $('#startDate').val();
			}
		});
	
	//	$('#content').summernote({
	//   	tabsize: 2,
	//     	lang: "ko-KR",
	//     	height: 500
	//	});
	
		window.onload=()=>{
		
			//첨부파일 추가
			document.querySelector('.bi-plus-square').addEventListener('click', ()=>{
				const photoRow = document.querySelector('#photoRow');
				const inputFile = document.createElement('input')
				inputFile.type = 'file';
				inputFile.name = 'files';
				inputFile.className = 'form-control plus';
							
				photoRow.append(inputFile);
			});
			
			document.querySelector('.bi-dash-square').addEventListener('click', function(){
				const last = document.querySelector('#photoRow').lastElementChild
				if(last.classList.contains('plus')){
					last.remove();
				}
			});
			
			//유효성 검사
			document.querySelector('#updateButton').addEventListener('click', function(){
				
				const form = document.querySelector('#updateBoardForm');
				
				const inputs = document.querySelectorAll('input:not([type="file"]):not([name="name"]):not([name="password"])')
				let validation = true;
				for(input of inputs){
					if(input.value == "" || input.value == null){
						input.focus();
						validation = false; 
					}
				}	
				if(validation){
					//첨부파일 빈 것 지우기
					const files = document.querySelectorAll('[name="files"]');
					for(const file of files){
						if(file.files.length == 0){
							file.remove();
						}
					}
					console.log("확인");
					form.submit();
				}
			});
				
		
	}
	
	
	
	</script>





























</body>
</html>
